[user]
  email = benoit.dechezelles@gmail.com
  name = Benoit de Chezelles

[github]
  user = bew

[push]
  default = current

[pull]
  ff = only # fast-forward only on pull, merges will be done manually if needed

[core]
  excludesfile = ~/.gitignore

[alias]

  # add & commit
  a = add
  ap = add -p
  an = add -N
  com = commit --verbose
  comp = com -p

  # index manipulation
  f = fetch
  m = merge
  ch = checkout
  sth = stash
  untrack = rm --cached

  unstage = reset HEAD

  # remote interaction
  ph = push
  pl = pull
  rem = remote -v

  # info only
  #----------------------------

  br = branch
  brv = "!git --no-pager branch -vv"
  s = status --ignore-submodules=all
  suf = status --untracked-files

  # log
  pretty-log = log --graph --decorate --date=format:'%a %e %b %Y [%H:%M]' --pretty=format:'%C(bold red)%h%C(reset) - %C(bold cyan)%ad%C(reset) | %C(green)%ar%C(reset)%C(auto)%d%C(reset)%n          %C(white)%s%C(reset)   %C(dim magenta)by %an%C(reset)%n'
  ll = pretty-log
  la = pretty-log --all
  lo = pretty-log --oneline

  # diff
  d = diff
  dc = diff --staged
  dd = diff -w
  ddc = diff -w --staged

  # last merge stats (This is a complex alias, I won't get auto-completion on this one..)
  stat-last-merge = "!f() { \
    sha_orig_head=$(git rev-parse --short ORIG_HEAD); \
    sha_head=$(git rev-parse --short HEAD); \
    echo 'Last merge (' ${sha_orig_head}..${sha_head} '):'; \
    git --no-pager diff --stat ORIG_HEAD $@ && git --no-pager diff --summary ORIG_HEAD $@; \
    }; f"
  slm = stat-last-merge

  # last merge diff (move as simple alias?)
  diff-last-merge = "diff ORIG_HEAD..HEAD"
  dlm = diff-last-merge

  # last merge logs
  log-last-merge = pretty-log ORIG_HEAD..
  llm = log-last-merge

  remove-old-commits = reflog expire --all --expire=now
  compress-repo = gc --aggressive --prune=now

[help]
  autocorrect = -1

[color]
  interactive = true

[color "status"]
  untracked = "cyan"

# -- BEGIN delta config

[core]
  pager = delta

[interactive]
  diffFilter = delta --color-only

[delta]
  features = line-numbers decorations
  ; whitespace-error-style = 22 reverse
  syntax-theme = DarkNeon
  paging = always

  # Removed lines
  minus-style = normal 52
  minus-emph-style = normal bold 88

  # Added lines
  plus-style = syntax 22
  plus-emph-style = normal bold 28

  file-modified-label = changed:

[delta "decorations"]
  file-style = bold 166
  file-decoration-style = none
  # NOTE: the decoration styles ul/ol/box uses unicode chars AFAIK

  commit-decoration-style = ol

  hunk-header-style = 243 236 # light grey on dark grey
  hunk-header-decoration-style = bold

  ; >> Using ASCII separator
  ; line-numbers-left-format = {nm:^4}|
  ; line-numbers-right-format = {np:^4}|
  ; >> Using Unicode separator
  line-numbers-left-format = {nm:^4}│
  line-numbers-right-format = {np:^4}│

# -- END delta config

[diff]
  tool = nvim_diff # NOTE: I _never_ use this....

  # Moved lines of code are colored differently.
  colorMoved = default
  # Ignore whitespace changes for indentation only.
  colorMovedWS = allow-indentation-change

[color "diff"]
  # color settings for 'colorMoved' option
  oldMoved = cyan 17
  newMoved = cyan 17

[difftool "nvim_diff"]
  cmd = nvim -d "$LOCAL" "$MERGED" "$REMOTE"

# Useful when I can't use SSH to communicate with github and I don't want to
# type my password/personal token everyting
#
# [credential "https://github.com"]
#   username = bew
#   helper = github-bew-password-from-env

# vim:set ft=gitconfig:
